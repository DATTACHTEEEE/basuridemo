<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Basuri Việt Nam</title>
<style>
  html,body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:url("anhxetai.jpg");
    background-size:cover;
    font-family:Arial, sans-serif;
    color:#fff;
    user-select:none;
    -webkit-user-drag:none;
    touch-action:none;
    overflow:hidden;
  }
  .player{
    background:rgba(0,0,0,0.6);
    border:4px solid #666;
    border-radius:20px;
    padding:30px;
    width:90%;
    max-width:1000px;
    text-align:center;
    box-shadow:0 0 20px #000;
    position:relative;
  }
  .screen{
    background:#0a0;
    color:#0f0;
    font-family:'Courier New', monospace;
    padding:10px;
    margin-bottom:20px;
    border-radius:6px;
    font-size:20px;
    min-height:30px;
    pointer-events:none;
  }
  .controls button{
    width:80px; height:80px;
    margin:0 12px;
    border:none; border-radius:50%;
    font-size:18px; cursor:pointer; color:#fff;
    box-shadow:0 4px 6px rgba(0,0,0,0.4);
  }
  .prev{background:#ff1900;}
  .play{background:#27ae60;}
  .next{background:#3498db;}
  select, input[type="range"]{
    width:95%; margin-top:15px;
  }
  .extra{
    margin-top:20px;
    display:flex; justify-content:space-between; align-items:center;
  }
  .extra button{
    background:#f1c40f; border:none;
    border-radius:6px; padding:8px 16px;
    cursor:pointer; font-weight:bold;
  }
  .update-box{
    margin-top:20px;
    text-align:center;
  }
  .update-box button{
    background:#1abc9c;
    border:none;
    padding:10px 18px;
    border-radius:6px;
    color:#fff;
    cursor:pointer;
    font-weight:bold;
  }
  .update-box p{
    margin-top:10px;
    font-size:15px;
    color:#f1c40f;
  }
  footer{
    margin-top:20px;
    text-align:center;
    color:#ccc;
    font-size:14px;
    pointer-events:none;
  }
  footer span{
    color:#f1c40f;
    font-weight:bold;
  }
  /* nút chấm hỏi */
  .help-btn{
    position:absolute;
    top:10px; right:10px;
    background:#e67e22;
    border:none; border-radius:50%;
    width:40px; height:40px;
    font-size:20px; font-weight:bold;
    color:#fff;
    cursor:pointer;
    box-shadow:0 3px 6px rgba(0,0,0,0.4);
  }
  /* popup */
  .popup{
    display:none;
    position:absolute;
    top:60px; right:10px;
    background:rgba(0,0,0,0.85);
    border:2px solid #f1c40f;
    border-radius:10px;
    padding:15px;
    text-align:center;
    z-index:100;
  }
  .popup button{
    display:block;
    width:100%;
    margin:10px 0;
    padding:8px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    color:#fff;
  }
  .discord{background:#5865F2;}
  .zalo{background:#0A7CFF;}
</style>
</head>
<body oncontextmenu="return false">

  <div class="player">
    <!-- nút chấm hỏi -->
    <button class="help-btn" id="helpBtn">?</button>

    <!-- popup -->
    <div class="popup" id="popup">
      <button class="discord" onclick="window.open('https://discord.gg/avqA64e4','_blank')">Tham gia Discord</button>
      <button class="zalo" onclick="window.open('https://zalo.me/g/wmstib433','_blank')">Tham gia Zalo</button>
    </div>

    <div class="screen" id="display">Chọn bài hát…</div>

    <div class="controls">
      <button class="prev" id="prev">◀</button>
      <button class="play" id="play">▶/⏸</button>
      <button class="next" id="next">▶</button>
    </div>

    <select id="trackList">
      <option value="snap1.mp3">Lấy Cây Kim May Đồ</option>
      <option value="bacphan.mp3">Bạc Phận</option>
      <option value="henhodemtrang.mp3">Hẹn Hò Đêm Trăng</option>
      <option value="basuri4.mp3">World Cup</option>
      <option value="melody12.mp3">Melody 12 loa</option>
      <option value="doraemon.mp3">Doraemon</option>
    </select>

    <label>Âm lượng:
      <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
    </label>

    <div class="extra">
      <button id="slower">– tốc độ</button>
      <span id="speedDisplay">1.0x</span>
      <button id="faster">+ tốc độ</button>
    </div>

    <div class="update-box">
      <button id="checkUpdateBtn">Kiểm tra cập nhật</button>
      <p id="updateResult"></p>
    </div>

    <audio id="player"></audio>
  </div>

  <footer>
    © Bản quyền <span>Đạt Tạch Tè 92 QN</span> – Donate:
    <span>0798770822 MB Bank Tên: Ly Vinh</span>
  </footer>

<script>
const audio = document.getElementById('player');
const display = document.getElementById('display');
const trackList = document.getElementById('trackList');
const volumeSlider = document.getElementById('volume');
const speedDisplay = document.getElementById('speedDisplay');

const tracks = [
  {name:'Lấy Cây Kim May Đồ', file:'snap1.mp3'},
  {name:'Bạc Phận', file:'bacphan.mp3'},
  {name:'Hẹn Hò Đêm Trăng', file:'henhodemtrang.mp3'},
  {name:'World Cup', file:'basuri4.mp3'},
  {name:'Melody 12 loa', file:'melody12.mp3'},
  {name:'Doraemon', file:'doraemon.mp3'}
];

let current = 0;

function loadTrack(i){
  current = i;
  audio.src = tracks[i].file;
  display.textContent = tracks[i].name;
  trackList.value = tracks[i].file;
}

document.getElementById('play').onclick = ()=> audio.paused ? audio.play() : audio.pause();
document.getElementById('prev').onclick = ()=>{ loadTrack((current-1+tracks.length)%tracks.length); audio.play(); };
document.getElementById('next').onclick = ()=>{ loadTrack((current+1)%tracks.length); audio.play(); };
trackList.onchange = ()=> loadTrack(tracks.findIndex(t=>t.file===trackList.value));
volumeSlider.oninput = ()=> audio.volume = volumeSlider.value;

let rate = 1.0;
document.getElementById('slower').onclick = ()=>{
  rate = Math.max(0.5, rate - 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
document.getElementById('faster').onclick = ()=>{
  rate = Math.min(2.0, rate + 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
loadTrack(0);

// kiểm tra cập nhật
const currentVersion = "1.0.0";
document.getElementById("checkUpdateBtn").addEventListener("click", async () => {
  const result = document.getElementById("updateResult");
  result.textContent = "Đang kiểm tra...";
  try {
    const res = await fetch("https://raw.githubusercontent.com/DATTACHTEEEE/basuridemo/main/version.json?nocache=" + Date.now());
    const data = await res.json();
    if (data.version && data.version !== currentVersion) {
      result.textContent = `Có bản mới ${data.version} – cập nhật lần cuối: ${data.updated}`;
    } else {
      const next = data.nextUpdate ? ` | Cập nhật tiếp theo: ${data.nextUpdate}` : "";
      result.textContent = `Đang ở bản mới nhất (Cập nhật lần cuối: ${data.updated}${next})`;
    }
  } catch (e) {
    result.textContent = "Lỗi kết nối, vui lòng thử lại sau.";
  }
});

// popup toggle
const helpBtn = document.getElementById("helpBtn");
const popup = document.getElementById("popup");
helpBtn.onclick = ()=>{
  popup.style.display = popup.style.display==="block" ? "none" : "block";
};
</script>
</body>
</html>



