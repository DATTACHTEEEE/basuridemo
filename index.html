<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Demo</title>
<style>
  html,body{
    background:#222; color:#fff; font-family:Arial, sans-serif;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    height:100vh; margin:0;
    overflow:hidden;
    user-select:none;
    -webkit-user-drag:none;
    touch-action:none;
  }
  .player{
    background:#333; border:4px solid #666;
    border-radius:20px; padding:30px;
    width:340px; text-align:center;
    box-shadow:0 0 20px #000;
    position:relative;
  }
  .screen{
    background:#0a0; color:#0f0;
    font-family:'Courier New', monospace;
    padding:10px; margin-bottom:20px;
    border-radius:6px; font-size:18px;
    min-height:30px;
    pointer-events:none;
  }
  .controls button{
    width:70px; height:70px;
    margin:0 8px; border:none; border-radius:50%;
    font-size:16px; cursor:pointer; color:#fff;
    box-shadow:0 4px 6px rgba(0,0,0,0.4);
  }
  .prev{background:#ff1900;}
  .play{background:#27ae60;}
  .next{background:#3498db;}
  select, input[type="range"]{
    width:100%; margin-top:15px;
  }
  .extra{
    margin-top:20px;
    display:flex; justify-content:space-between; align-items:center;
  }
  .extra button{
    background:#f1c40f; border:none;
    border-radius:6px; padding:6px 12px;
    cursor:pointer; font-weight:bold;
  }
  .update-box{
    margin-top:20px;
    text-align:center;
  }
  .update-box button{
    background:#1abc9c;
    border:none;
    padding:8px 14px;
    border-radius:6px;
    color:#fff;
    cursor:pointer;
    font-weight:bold;
  }
  .update-box p{
    margin-top:10px;
    font-size:14px;
    color:#f1c40f;
  }
  footer{
    margin-top:20px;
    text-align:center;
    color:#ccc;
    font-size:14px;
    pointer-events:none;
  }
  footer span{
    color:#f1c40f;
    font-weight:bold;
  }
</style>
</head>
<body oncontextmenu="return false">

  <div class="player">
    <div class="screen" id="display">Chọn bài hát…</div>

    <div class="controls">
      <button class="prev" id="prev">◀</button>
      <button class="play" id="play">▶/⏸</button>
      <button class="next" id="next">▶</button>
    </div>

    <select id="trackList">
      <option value="snap1.mp3">Lấy Cây Kim May Đồ</option>
      <option value="bacphan.mp3">Bạc Phận</option>
      <option value="henhodemtrang.mp3">Hẹn Hò Đêm Trăng</option>
      <option value="basuri4.mp3">World Cup</option>
      <option value="melody12.mp3">Melody 12 loa</option>
      <option value="doraemon.mp3">Doraemon</option>
    </select>

    <label>Âm lượng:
      <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
    </label>

    <div class="extra">
      <button id="slower">– tốc độ</button>
      <span id="speedDisplay">1.0x</span>
      <button id="faster">+ tốc độ</button>
    </div>

    <!-- Nút kiểm tra cập nhật -->
    <div class="update-box">
      <button id="checkUpdateBtn">Kiểm tra cập nhật</button>
      <p id="updateResult"></p>
    </div>

    <audio id="player"></audio>
  </div>

  <footer>
    © Bản quyền <span>Đạt Tạch Tè 92 QN</span> – Donate:
    <span>0798770822 MB Bank Tên: Ly Vinh</span>
  </footer>

<script>
const audio = document.getElementById('player');
const display = document.getElementById('display');
const trackList = document.getElementById('trackList');
const volumeSlider = document.getElementById('volume');
const speedDisplay = document.getElementById('speedDisplay');

const tracks = [
  {name:'Lấy Cây Kim May Đồ', file:'snap1.mp3'},
  {name:'Bạc Phận', file:'bacphan.mp3'},
  {name:'Hẹn Hò Đêm Trăng', file:'henhodemtrang.mp3'},
  {name:'World Cup', file:'basuri4.mp3'},
  {name:'Melody 12 loa', file:'melody12.mp3'},
  {name:'Doraemon', file:'doraemon.mp3'}
];

let current = 0;
function loadTrack(i){
  current = i;
  audio.src = tracks[i].file;
  display.textContent = tracks[i].name;
  trackList.value = tracks[i].file;
}

document.getElementById('play').onclick = ()=> audio.paused ? audio.play() : audio.pause();
document.getElementById('prev').onclick = ()=>{ loadTrack((current - 1 + tracks.length)%tracks.length); audio.play(); };
document.getElementById('next').onclick = ()=>{ loadTrack((current + 1)%tracks.length); audio.play(); };
trackList.onchange = ()=> loadTrack(tracks.findIndex(t=>t.file===trackList.value));
volumeSlider.oninput = ()=> audio.volume = volumeSlider.value;

let rate = 1.0;
document.getElementById('slower').onclick = ()=>{
  rate = Math.max(0.5, rate - 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
document.getElementById('faster').onclick = ()=>{
  rate = Math.min(2.0, rate + 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
loadTrack(0);

// ===== Kiểm tra cập nhật =====
const currentVersion = "1.0.0";   // phiên bản hiện tại của web
document.getElementById("checkUpdateBtn").addEventListener("click", async () => {
    const result = document.getElementById("updateResult");
    result.textContent = "Đang kiểm tra...";
    try {
        // dùng link GitHub Pages của bạn và thêm ?nocache
        const res = await fetch(
          "https://dattachteeee.github.io/basuridemo/version.json?nocache=" + Date.now()
        );
        const data = await res.json();

        // file version.json của bạn có { "version": "...", "updated": "..." }
        if (data.version && data.version !== currentVersion) {
            result.textContent = `Có bản mới ${data.version} – cập nhật lần cuối: ${data.updated}`;
        } else {
            result.textContent = `Đang ở bản mới nhất (Cập nhật lần cuối: ${data.updated})`;
        }
    } catch (e) {
        result.textContent = "Không kiểm tra được (lỗi mạng hoặc file version.json).";
    }
});
</script>
</body>
</html>


