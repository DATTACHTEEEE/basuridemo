<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Demo</title>
<style>
  /* ... giữ nguyên phần CSS trước đó ... */
  .update-box{
    margin-top:15px;
    background:#444;
    padding:10px;
    border-radius:8px;
    font-size:14px;
    text-align:center;
  }
  .update-box button{
    margin-top:8px;
    padding:6px 12px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    background:#3498db;
    color:#fff;
    font-weight:bold;
  }
</style>
</head>
<body oncontextmenu="return false">
  <div class="player">
    <!-- ...phần player giữ nguyên... -->

    <!-- Hộp thông tin update -->
    <div class="update-box">
      Phiên bản hiện tại: <span id="localVersion">1.0.0</span><br>
      Cập nhật lần cuối: <span id="localTime">2025-09-15 17:00</span><br>
      <button id="checkUpdate">Kiểm tra cập nhật</button>
      <div id="updateMsg"></div>
    </div>

    <audio id="player"></audio>
  </div>

  <footer>
    © Bản quyền <span>Đạt Tạch Tè 92 QN</span> – Donate: 
    <span>0798770822 MB Bank Tên: Ly Vinh</span>
  </footer>

<script>
/* ====== Player gốc ====== */
const audio=document.getElementById('player'),
      display=document.getElementById('display'),
      trackList=document.getElementById('trackList'),
      volumeSlider=document.getElementById('volume'),
      speedDisplay=document.getElementById('speedDisplay');
const tracks=[
  {name:'Lấy Cây Kim May Đồ',file:'snap1.mp3'},
  {name:'Bạc Phận',file:'bacphan.mp3'},
  {name:'Hẹn Hò Đêm Trăng',file:'henhodemtrang.mp3'},
  {name:'World Cup',file:'basuri4.mp3'},
  {name:'Melody 12 loa',file:'melody12.mp3'},
  {name:'Doraemon',file:'doraemon.mp3'}
];
let current=0;
function loadTrack(i){
  current=i;
  audio.src=tracks[i].file;
  display.textContent=tracks[i].name;
  trackList.value=tracks[i].file;
}
document.getElementById('play').onclick=()=>audio.paused?audio.play():audio.pause();
document.getElementById('prev').onclick=()=>{loadTrack((current-1+tracks.length)%tracks.length);audio.play();};
document.getElementById('next').onclick=()=>{loadTrack((current+1)%tracks.length);audio.play();};
trackList.onchange=()=>loadTrack(tracks.findIndex(t=>t.file===trackList.value));
volumeSlider.oninput=()=>audio.volume=volumeSlider.value;
let rate=1.0;
document.getElementById('slower').onclick=()=>{rate=Math.max(0.5,rate-0.1);audio.playbackRate=rate;speedDisplay.textContent=rate.toFixed(1)+'x';};
document.getElementById('faster').onclick=()=>{rate=Math.min(2.0,rate+0.1);audio.playbackRate=rate;speedDisplay.textContent=rate.toFixed(1)+'x';};
loadTrack(0);

/* ====== Check Update ====== */
const localVersion="1.0.0";
const localTime="2025-09-15 17:00";
document.getElementById("localVersion").textContent=localVersion;
document.getElementById("localTime").textContent=localTime;

document.getElementById("checkUpdate").onclick=async ()=>{
  const msg=document.getElementById("updateMsg");
  msg.textContent="Đang kiểm tra...";
  try{
    // Thay URL này bằng đường dẫn thật tới version.json trên GitHub Pages của bạn
    const res=await fetch("https://DATTACHTEEEE.github.io/basuridemo/"+Date.now());
    if(!res.ok) throw new Error("Không tải được dữ liệu");
    const data=await res.json();
    if(data.version!==localVersion){
      msg.innerHTML=`Có bản mới: <b>${data.version}</b><br>Cập nhật: ${data.updated}`;
    }else{
      msg.textContent="Bạn đang dùng bản mới nhất.";
    }
  }catch(e){
    msg.textContent="Lỗi khi kiểm tra: "+e.message;
  }
};
</script>
</body>
</html>

