<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Basuri Việt Nam</title>
<style>
  /* giữ nguyên CSS cũ của bạn */
  html,body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:url("anhxetai.jpg");
    background-size:cover;
    font-family:Arial, sans-serif;
    color:#fff;
    user-select:none;
    -webkit-user-drag:none;
    touch-action:none;
    overflow:hidden;
  }
  /* …các style khác không đổi… */
</style>
</head>
<body oncontextmenu="return false">

  <div class="player">
    <button class="help-btn" id="helpBtn">?</button>
    <div class="popup" id="popup">
      <button class="discord" onclick="window.open('https://discord.gg/avqA64e4','_blank')">Tham gia Discord</button>
      <button class="zalo" onclick="window.open('https://zalo.me/g/wmstib433','_blank')">Tham gia Zalo</button>
    </div>

    <div class="screen" id="display">Chọn bài hát…</div>

    <div class="controls">
      <button class="prev" id="prev">◀</button>
      <button class="play" id="play">▶/⏸</button>
      <button class="next" id="next">▶</button>
    </div>

    <!-- ĐÃ thêm 2 option mới -->
    <select id="trackList">
      <option value="snap1.mp3">Lấy Cây Kim May Đồ</option>
      <option value="bacphan.mp3">Bạc Phận</option>
      <option value="henhodemtrang.mp3">Hẹn Hò Đêm Trăng</option>
      <option value="basuri4.mp3">World Cup</option>
      <option value="melody12.mp3">Melody 12 loa</option>
      <option value="doraemon.mp3">Doraemon</option>
      <option value="meloditamvan.mp3">Melodi TamVan</option>
      <option value="tinhanhem.mp3">Tình Anh Em</option> 
      <option value="ngokhongv7.mp3">Ngộ Không V7</option>
    </select>

    <label>Âm lượng:
      <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
    </label>

    <div class="extra">
      <button id="slower">– tốc độ</button>
      <span id="speedDisplay">1.0x</span>
      <button id="faster">+ tốc độ</button>
    </div>

    <div class="update-box">
      <button id="checkUpdateBtn">Kiểm tra cập nhật</button>
      <p id="updateResult"></p>
    </div>

    <audio id="player"></audio>
  </div>

  <footer>
    © Bản quyền <span>Đạt Tạch Tè 92 QN</span> – Donate:
    <span>0798770822 MB Bank Tên: Ly Vinh</span>
  </footer>

<script>
const audio = document.getElementById('player');
const display = document.getElementById('display');
const trackList = document.getElementById('trackList');
const volumeSlider = document.getElementById('volume');
const speedDisplay = document.getElementById('speedDisplay');

// ĐÃ thêm 2 bài mới vào mảng tracks
const tracks = [
  {name:'Lấy Cây Kim May Đồ', file:'snap1.mp3'},
  {name:'Bạc Phận', file:'bacphan.mp3'},
  {name:'Hẹn Hò Đêm Trăng', file:'henhodemtrang.mp3'},
  {name:'World Cup', file:'basuri4.mp3'},
  {name:'Melody 12 loa', file:'melody12.mp3'},
  {name:'Doraemon', file:'doraemon.mp3'},
  {name:'Melodi TamVan', file:'meloditamvan.mp3'},
  {name:'Tình Anh Em', file:'tinhanhem.mp3'},
  {name:'Ngộ Không V7', file:'ngokhongv7.mp3'}
];

let current = 0;

function loadTrack(i){
  current = i;
  audio.src = tracks[i].file;
  display.textContent = tracks[i].name;
  trackList.value = tracks[i].file;
}

document.getElementById('play').onclick = ()=> audio.paused ? audio.play() : audio.pause();
document.getElementById('prev').onclick = ()=>{ loadTrack((current-1+tracks.length)%tracks.length); audio.play(); };
document.getElementById('next').onclick = ()=>{ loadTrack((current+1)%tracks.length); audio.play(); };
trackList.onchange = ()=> loadTrack(tracks.findIndex(t=>t.file===trackList.value));
volumeSlider.oninput = ()=> audio.volume = volumeSlider.value;

let rate = 1.0;
document.getElementById('slower').onclick = ()=>{
  rate = Math.max(0.5, rate - 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
document.getElementById('faster').onclick = ()=>{
  rate = Math.min(2.0, rate + 0.1);
  audio.playbackRate = rate;
  speedDisplay.textContent = rate.toFixed(1)+'x';
};
loadTrack(0);

// kiểm tra cập nhật (giữ nguyên)
const currentVersion = "1.0.0";
document.getElementById("checkUpdateBtn").addEventListener("click", async () => {
  const result = document.getElementById("updateResult");
  result.textContent = "Đang kiểm tra...";
  try {
    const res = await fetch("https://raw.githubusercontent.com/DATTACHTEEEE/basuridemo/main/version.json?nocache=" + Date.now());
    const data = await res.json();
    if (data.version && data.version !== currentVersion) {
      result.textContent = `Có bản mới ${data.version} – cập nhật lần cuối: ${data.updated}`;
    } else {
      const next = data.nextUpdate ? ` | Cập nhật tiếp theo: ${data.nextUpdate}` : "";
      result.textContent = `Đang ở bản mới nhất (Cập nhật lần cuối: ${data.updated}${next})`;
    }
  } catch (e) {
    result.textContent = "Lỗi kết nối, vui lòng thử lại sau.";
  }
});

// popup toggle
const helpBtn = document.getElementById("helpBtn");
const popup = document.getElementById("popup");
helpBtn.onclick = ()=>{
  popup.style.display = popup.style.display==="block" ? "none" : "block";
};
</script>
</body>
</html>

